@model DevcraftWMS.DemoMvc.ViewModels.Shared.AddressFormSectionViewModel
@{
    var originalPrefix = ViewData.TemplateInfo.HtmlFieldPrefix;
    ViewData.TemplateInfo.HtmlFieldPrefix = Model.Prefix;
    var address = Model.Address;
    var componentId = $"address-{Model.Prefix.Replace('.', '-').Replace('[', '-').Replace(']', '-')}";
}

<div class="address-component" id="@componentId"
     data-address-component="true"
     data-cep-enabled="@Model.EnableCepLookup.ToString().ToLowerInvariant()"
     data-ibge-enabled="@Model.EnableIbgeLookup.ToString().ToLowerInvariant()"
     data-states-url="@Url.Action("States", "AddressLookup")"
     data-cities-url="@Url.Action("Cities", "AddressLookup")"
     data-cep-url="@Url.Action("Cep", "AddressLookup")">
    <h6 class="text-muted">@Model.Title</h6>
    <div class="row g-3">
        <div class="col-md-3">
            <label class="form-label">Postal Code (CEP)</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-geo"></i></span>
                <input class="form-control" asp-for="@address.PostalCode" data-address-field="postalCode" />
                <button class="btn btn-outline-secondary" type="button" data-address-lookup="cep">
                    <i class="bi bi-search"></i>
                </button>
            </div>
            <span class="text-danger small" asp-validation-for="@address.PostalCode"></span>
        </div>
        <div class="col-md-3">
            <label class="form-label">Country</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-globe2"></i></span>
                <input class="form-control" asp-for="@address.Country" data-address-field="country" />
            </div>
            <span class="text-danger small" asp-validation-for="@address.Country"></span>
        </div>
        <div class="col-md-6">
            <label class="form-label">Address Line 1</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-house"></i></span>
                <input class="form-control" asp-for="@address.AddressLine1" data-address-field="addressLine1" />
            </div>
            <span class="text-danger small" asp-validation-for="@address.AddressLine1"></span>
        </div>
        <div class="col-md-6">
            <label class="form-label">Address Line 2</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-building"></i></span>
                <input class="form-control" asp-for="@address.AddressLine2" data-address-field="addressLine2" />
            </div>
        </div>
        <div class="col-md-4">
            <label class="form-label">District</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-signpost"></i></span>
                <input class="form-control" asp-for="@address.District" data-address-field="district" />
            </div>
        </div>
        <div class="col-md-4">
            <label class="form-label">State (UF)</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-map"></i></span>
                <select class="form-select" asp-for="@address.State" data-address-field="state" data-current-value="@address.State"></select>
            </div>
            <span class="text-danger small" asp-validation-for="@address.State"></span>
        </div>
        <div class="col-md-4">
            <label class="form-label">City</label>
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-geo-alt"></i></span>
                <select class="form-select" asp-for="@address.City" data-address-field="city" data-current-value="@address.City"></select>
            </div>
            <span class="text-danger small" asp-validation-for="@address.City"></span>
        </div>
        @if (Model.ShowGeoCoordinates)
        {
            <div class="col-md-3">
                <label class="form-label">Latitude</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-compass"></i></span>
                    <input class="form-control" asp-for="@address.Latitude" type="number" step="0.000001" />
                </div>
            </div>
            <div class="col-md-3">
                <label class="form-label">Longitude</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="bi bi-compass-fill"></i></span>
                    <input class="form-control" asp-for="@address.Longitude" type="number" step="0.000001" />
                </div>
            </div>
        }
    </div>
</div>

@{
    ViewData.TemplateInfo.HtmlFieldPrefix = originalPrefix;
}
