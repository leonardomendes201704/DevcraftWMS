@using DevcraftWMS.DemoMvc.ViewModels.Shared
@model DevcraftWMS.DemoMvc.ViewModels.Warehouses.WarehouseDetailsViewModel
@{
    ViewData["Title"] = "Warehouse Details";
    ViewData["Subtitle"] = $"{Model.Code} - {Model.Name}";

    var coreInfo = new InfoListViewModel
    {
        Title = "Core details",
        Items = new List<InfoListItem>
        {
            new() { Label = "Code", Value = Model.Code },
            new() { Label = "Name", Value = Model.Name },
            new() { Label = "Short name", Value = Model.ShortName ?? "-" },
            new() { Label = "Type", Value = Model.WarehouseType.ToString() },
            new() { Label = "Status", Value = Model.IsActive ? "Active" : "Inactive", BadgeText = Model.IsActive ? "Active" : "Inactive", BadgeCssClass = Model.IsActive ? "text-bg-success" : "text-bg-secondary" },
            new() { Label = "Primary", Value = Model.IsPrimary ? "Yes" : "No" }
        }
    };

    var primaryAddress = Model.Addresses.FirstOrDefault();
    var addressInfo = new InfoListViewModel
    {
        Title = "Primary address",
        Items = primaryAddress is null
            ? new List<InfoListItem> { new() { Label = "Address", Value = "Not provided" } }
            : new List<InfoListItem>
            {
                new() { Label = "Address", Value = $"{primaryAddress.AddressLine1} {primaryAddress.AddressLine2}".Trim() },
                new() { Label = "District", Value = primaryAddress.District ?? "-" },
                new() { Label = "City", Value = primaryAddress.City },
                new() { Label = "State", Value = primaryAddress.State },
                new() { Label = "Postal Code", Value = primaryAddress.PostalCode },
                new() { Label = "Country", Value = primaryAddress.Country },
                new() { Label = "Latitude", Value = primaryAddress.Latitude?.ToString() ?? "-" },
                new() { Label = "Longitude", Value = primaryAddress.Longitude?.ToString() ?? "-" }
            }
    };

    var primaryContact = Model.Contacts.FirstOrDefault();
    var contactInfo = new InfoListViewModel
    {
        Title = "Primary contact",
        Items = primaryContact is null
            ? new List<InfoListItem> { new() { Label = "Contact", Value = "Not provided" } }
            : new List<InfoListItem>
            {
                new() { Label = "Name", Value = primaryContact.ContactName },
                new() { Label = "Email", Value = primaryContact.ContactEmail ?? "-" },
                new() { Label = "Phone", Value = primaryContact.ContactPhone ?? "-" }
            }
    };

    var primaryCapacity = Model.Capacities.FirstOrDefault();
    var capacityInfo = new InfoListViewModel
    {
        Title = "Capacity & dimensions",
        Items = primaryCapacity is null
            ? new List<InfoListItem> { new() { Label = "Capacity", Value = "Not provided" } }
            : new List<InfoListItem>
            {
                new() { Label = "Length (m)", Value = primaryCapacity.LengthMeters?.ToString() ?? "-" },
                new() { Label = "Width (m)", Value = primaryCapacity.WidthMeters?.ToString() ?? "-" },
                new() { Label = "Height (m)", Value = primaryCapacity.HeightMeters?.ToString() ?? "-" },
                new() { Label = "Total area (m2)", Value = primaryCapacity.TotalAreaM2?.ToString() ?? "-" },
                new() { Label = "Total capacity", Value = primaryCapacity.TotalCapacity?.ToString() ?? "-" },
                new() { Label = "Capacity unit", Value = primaryCapacity.CapacityUnit?.ToString() ?? "-" },
                new() { Label = "Max weight (kg)", Value = primaryCapacity.MaxWeightKg?.ToString() ?? "-" },
                new() { Label = "Operational area", Value = primaryCapacity.OperationalArea?.ToString() ?? "-" }
            }
    };
}

<div class="card mb-3">
    <div class="card-body d-flex gap-2">
        <a class="btn btn-primary" asp-action="Edit" asp-route-id="@Model.Id">Edit</a>
        <a class="btn btn-outline-danger" asp-action="Delete" asp-route-id="@Model.Id">Deactivate</a>
        <a class="btn btn-light border" asp-action="Index">Back</a>
    </div>
</div>

<div class="row g-3">
    <div class="col-lg-6">
        <partial name="_InfoList" model="coreInfo" />
    </div>
    <div class="col-lg-6">
        <partial name="_InfoList" model="addressInfo" />
    </div>
    <div class="col-lg-6">
        <partial name="_InfoList" model="contactInfo" />
    </div>
    <div class="col-lg-6">
        <partial name="_InfoList" model="capacityInfo" />
    </div>
</div>
