# History Log

## 2026-02-02
- UX - Portal customer context error message.
  - Key changes: friendly message when X-Customer-Id is missing in Portal API calls.
- Fix - Seed zone customer access concurrency.
  - Key changes: insert ZoneCustomer directly to avoid tracking conflicts during seed.
- TASK-0054 - Portal ASN UI completed.
  - Key changes: added ASN list/create/details screens in Portal, API clients for ASN/warehouses, and help manual on index.
- TASK-0053 - ASN API CQRS completed.
  - Key changes: added ASN CQRS/service/repository, API endpoints, and unit/integration tests for create/list/get.
- TASK-0052 - ASN model and status completed.
  - Key changes: added Asn/AsnItem entities, AsnStatus enum, EF configs, DbSets, and migration AddAsnModel.
- Tasking - Added RBAC management tasks (API/UI).
  - Key changes: created TASK-0089/0090/0091 for roles, user management, and backoffice UI.
- TASK-0051 - RBAC base roles and policies completed.
  - Key changes: added UserRole, role claim in JWT, admin role seeding, role-based policies and controller guards, test auth default, and migration AddUserRole.
- TASK-0050 - Location capacity and compatibility completed.
  - Key changes: added max weight/volume and tracking flags to locations, enforced compatibility in receipts/movements, updated Location UI, tests, and migration AddLocationCapacityAndRestrictions.
- TASK-0049 - Zones completed.
  - Key changes: added Zone entity/type, customer access, and Location.ZoneId link; added Zones API/UI with filters; added zone seed data; added unit/integration tests; added migration AddZones.
- TASK-0048 - Minimum shelf-life per SKU completed.
  - Key changes: added MinimumShelfLifeDays to products, enforced lot requirement and quarantine on receipt, blocked balances for quarantined lots, updated UI and tests, and added migration AddProductMinimumShelfLifeDays.
- TASK-0047 - SKU Tracking Mode completed.
  - Key changes: added TrackingMode enum to products, API/UI support, lot validation rules, and migration AddProductTrackingMode.
- TASK-0046 - Portaria (projeto web) completed.
  - Key changes: created DevcraftWMS.Portaria MVC project with shared layout, login/session flow, customer context selector, and API client base.
- TASK-0045 - Portal do Cliente (projeto web) completed.
  - Key changes: created DevcraftWMS.Portal MVC project with shared layout, login/session flow, customer context selector, and API client base.
- Tasking - Created inbound epic tasks (WMS-INB-001).
  - Key changes: created epic folder with prioritized, small-scope tasks for ASN, OE, portaria, recebimento, qualidade/quarentena, putaway, encerramento, and new Portal/Portaria projects.
- Tasking - Marked TASK-0010 as done.
  - Key changes: renamed task file to DONE prefix and recorded completed subtasks.
- Fix - Seed movement lookup translation.
  - Key changes: replaced StartsWith with EF.Functions.Like for SQLite translation in seed detection.
- Fix - Inventory movements structure lookup.
  - Key changes: added customer-scoped structures list endpoint and DemoMvc client usage to populate movement form options reliably.
- TASK-0043 - Movimentacoes Internas (Seed + Observabilidade) completed.
  - Key changes: added optional seed for inventory movements/balances with configurable quantities and windows, plus README/env updates.
- TASK-0042 - Movimentacoes Internas (Testes) completed.
  - Key changes: added unit tests for movement service and integration tests for movement creation and insufficient balance scenarios.
- TASK-0041 - Movimentacoes Internas (DemoMvc UI) completed.
  - Key changes: added Inventory Movements UI (Index/Create/Details), filters, help modal, and navigation entry.
- TASK-0040 - Movimentacoes Internas (API + Application) completed.
  - Key changes: added CQRS, service, repository, and API endpoints for inventory movements with balance updates.
- TASK-0039 - Movimentacoes Internas (Modelo/DB) completed.
  - Key changes: added InventoryMovement entity/status, EF config, DbSet, and migration AddInventoryMovements.
- Tasking - Split TASK-0010 into smaller subtasks.
  - Key changes: created TASK-0039..TASK-0043 and updated TASK-0010 with split references and new guideline.
- Fix - Receipt AddItem model binding.
  - Key changes: bind AddItem to NewItem prefix to avoid required Receipt validation.
- Fix - Receipt AddItem numeric input handling.
  - Key changes: added validation summary, numeric input configuration, and decimal normalization on submit.
- Fix - Receipts AddItem binding.
  - Key changes: post model now binds NewItem fields to avoid Guid.Empty receipt id.
- Fix - Receipt dropdown cascade and default selection.
  - Key changes: added "Selecione..." prompts, cascading selection refresh, and guideline for dropdown defaults.
- Guideline - Respect API PageSize limits in DemoMvc lookups.
  - Key changes: added frontend rule to cap lookup PageSize to API max (100).
- Fix - Receipts page size validation.
  - Key changes: reduced lookup pageSize to 100 to satisfy API validation.
- UX - Surface API validation errors in DemoMvc.
  - Key changes: parse ValidationProblemDetails errors for friendlier messages in API client.
- TASK-0011 - Recebimento (Inbound) completed.
  - Key changes: added Receipt/ReceiptItem entities, API endpoints, DemoMvc screens, and inventory balance integration with tests and migration.
- Guideline - Prefix DONE for completed tasks.
  - Key changes: added rule to AGENTS and renamed completed task files with DONE- prefix.
- TASK-0020 - Login Help manual added.
  - Key changes: added Help button and modal manual for the Login screen.
- TASK-0019 - Dashboard Help manual added.
  - Key changes: added Help button and modal manual for the Dashboard screen.
- TASK-0038 - UI Showcase Help manual added.
  - Key changes: added Help button and modal manual for UI Showcase reference screen.
- TASK-0037 - Settings Help manual added.
  - Key changes: added Help button and modal manual for Settings screen (DemoMvc + API settings).
- TASK-0036 - Email Test Help manual added.
  - Key changes: added Help button and modal manual for Email Test screen.
- TASK-0035 - Frontend Errors Help manual added.
  - Key changes: added Help button and modal manual for Client Logs (filters, details, SignalR).
- TASK-0034 - Transaction Logs Help manual added.
  - Key changes: added Help button and modal manual for Transaction Logs (filters, details, SignalR).
- TASK-0033 - Error Logs Help manual added.
  - Key changes: added Help button and modal manual for Error Logs (filters, details, SignalR).
- TASK-0032 - Request Logs Help manual added.
  - Key changes: added Help button and modal manual for Request Logs (filters + SignalR).
- TASK-0031 - Inventory Balances Help manual added.
  - Key changes: added Help button and modal manual covering Inventory Balances Index + CRUD screens.
- TASK-0030 - Locations Help manual added.
  - Key changes: added Help button and modal manual covering Locations Index + CRUD screens.
- TASK-0029 - Aisles Help manual added.
  - Key changes: added Help button and modal manual covering Aisles Index + CRUD screens.
- TASK-0028 - Structures Help manual added.
  - Key changes: added Help button and modal manual covering Structures Index + CRUD screens.
- TASK-0027 - Sections Help manual added.
  - Key changes: added Help button and modal manual covering Sections Index + CRUD screens.
- TASK-0026 - Sectors Help manual added.
  - Key changes: added Help button and modal manual covering Sectors Index + CRUD screens.
- TASK-0025 - Warehouses Help manual added.
  - Key changes: added Help button and modal manual covering Warehouses Index + CRUD screens.
- TASK-0024 - UoM Help manual added.
  - Key changes: added Help button and modal manual covering UoM Index + CRUD screens.
- TASK-0023 - Lots Help manual added.
  - Key changes: added Help button and modal manual covering Lots Index + CRUD screens.
- TASK-0022 - Products Help manual added.
  - Key changes: added Help button and modal manual covering Products Index + CRUD and UoM conversions.
- TASK-0021 - Customers Help manual added.
  - Key changes: added Help button and modal manual covering Customers Index + CRUD screens.
- Guidelines - DemoMvc Help manuals per screen.
  - Key changes: added tasks for Help manuals and updated DemoMvc agent guidelines to require Help on Index + CRUD screens.
- TASK-0009 - Inventory balances per location completed.
